---
import { getCollection } from 'astro:content'

import AnimationFadeIn from 'components/shared/AnimationFadeIn.astro'

import { projectFormat } from 'lib/projectFormat'
import SubProjects from './SubProjects.astro'

const [project, websites] = await Promise.all([
  getCollection('project'),
  getCollection('websites')
])

const formattedWebsites = projectFormat({ projects: websites })
---

<section id={project[0].data.slugs}>
  <div class="wrapper pt-20">
    <AnimationFadeIn>
      <div>
        <h2 class="text-5xl">{project[0].data.title}</h2>
        <p class="mt-2 max-w-xs text-sm">
          {project[0].data.subtitle}
        </p>
      </div>
    </AnimationFadeIn>

    <SubProjects projects={formattedWebsites} />
  </div>
</section>
